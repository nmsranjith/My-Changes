$(document).ready(function () { $("#ddlschooltypetop").css("display", "block"); PopulateAuto($("#ddlschooltypetop").val()); $("#ddlschooltypetop").kendoDropDownList({ select: a }); function a(b) { var c = this.dataItem(b.item.index()); var d; switch (c.text.toLowerCase()) { case "primary": PopulateAuto("0"); break; case "secondary": PopulateAuto("1"); break; case "all": PopulateAuto("2"); break } } }); function PopulateAuto(a) { $("#TextSearch").autocomplete({ source: function (c, b) { $.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: GetFile("/controls/SearchHandlerModified/SearchHandlerModified.ashx?ddlDivisionValue=" + a + "&searchtxt=" + encodeURIComponent($("#TextSearch").val())), data: "{}", dataType: "json", success: function (d) { b(d) }, error: function (d) { } }) }, select: function (d, c) { $(this).val(c.item.value); searchHandlerCall() } }) } function onTextSearchtopAllSelect(a) { var b = this.dataItem(a.item.index()); $("#TextSearch").val(b); searchHandlerCall() } function clickfocusevent(a) { var b = (a.which) ? a.which : a.keyCode; if ((b == 13)) { a.preventDefault(); searchHandlerCall(); return true } } function ProductClick() { searchHandlerCall() } function searchHandlerCall() { var a = ""; if ($("#TextSearch").val() != "" && $("#TextSearch").val() != "Enter your search here...") { a = $("#TextSearch").val(); window.location.href = "/search?q=" + encodeURIComponent(a) + "&division=" + $("#ddlschooltypetop option:selected").text().toLowerCase() } else { window.location.href = "/search?q=&division=" + $("#ddlschooltypetop option:selected").text().toLowerCase() } };