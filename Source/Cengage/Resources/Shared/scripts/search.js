$(document).ready(function () { if (GetQueryStringParams("cp") != undefined) { var Pagen = $("#Pagenum").val(); if (Pagen > 0) { $("#PagesCount")[0].innerHTML = Pagen; $("#Hidpagecnt").val(Pagen) } else { $("#PagesCount")[0].innerHTML = 0; $("#Hidpagecnt").val(0) } var pagecount = $("#PagesCount")[0].innerHTML; var prodcount = $("#PrdCount")[0].innerHTML; if (prodcount == 0 & pagecount > 0) { $(".Nrfrdiv").css("display", "block"); $("#searAct").css("display", "none"); $("#searDet").css("display", "none"); $("#PrdCount")[0].innerHTML = 0; $(".ktab").css("margin-top", "-320px"); $(".Nrfrdiv").css("margin-top", "80px"); $(".Nrfrdiv").css("margin-left", "235px"); $("#tabstrip1").css("height", "63px"); $("#Img1").css("display", "none"); $("#Div3").css("display", "none") } else { productpages() } }; ShowfacetRelation(); $("#Selectsort").kendoDropDownList({ animation: false, select: OnSortSelect }); var d = GetQueryStringParams("s"); var b = $("#Selectsort").data("kendoDropDownList"); if (d != "" && d != undefined) { switch (d.toLowerCase()) { case "l": $('#Selectsort option[value="L"]').prop("selected", true); b.value("L"); break; case "a": $('#Selectsort option[value="A"]').prop("selected", true); b.value("A"); break; case "d": $('#Selectsort option[value="D"]').prop("selected", true); b.value("D"); break; default: $('#Selectsort option[value="R"]').prop("selected", true); b.value("R"); break } } var h = GetFile("/Portals/0/Images/check.PNG"); $(".LeftMenu span input:checked").each(function () { $(this).parent().parent().find("#unchkboxs").attr("src", h) }); var m = GetQueryStringParams("f"); if (m != "" && m != undefined) { var a = []; a = m.split(":"); var l = false; for (var g = 0; g < a.length; g++) { var c = a[g].split("-")[0]; var e = a[g].split("-")[1]; if (e == undefined) { e = "0" } var k = e.split(","); for (var f = 0; f < k.length; f++) { $(".LeftMenu span input").each(function () { var i = $(this).parent().next()[0].value.split("-"); if (i[0] == c && i[1] == k[f]) { $(this).parent().parent().find("#unchkboxs").attr("src", h); if ($(this).prop("checked") == false) { $(this).click() } l = true } if (l) { return false } }) } } } }); function ShowfacetRelation() { var h = GetQueryStringParams("f"); var b = false; if (h != undefined && h != "") { var a = []; a = h.split(":"); for (var f = 0; f < a.length; f++) { var c = a[f].split("-")[0]; var d = a[f].split("-")[1]; if (d == undefined) { d = "0" } var g = d.split(","); for (var e = 0; e < g.length; e++) { $(".LeftMenu span input").each(function () { var i = $(this).parent().next()[0].value.split("-"); if (i[0] == c && i[1] == g[e]) { b = true; if (e != 0) { $("#SelectedAttributeList").append("<li class='newLiStyle'><div><span class='H5 or filter'>OR</span></div></li>") } $("#SelectedAttributeList").append("<li class='newLiStyle'><div class='maths H5'><span class='or newfilter' style='color: #707070 !important;'>" + $("input[value^=" + c + "-" + g[e] + "]")[0].defaultValue.split("-")[3] + "</span><div class='crs' onclick=RemoveAttr('" + c + "-" + g[e] + "');></div></div></li>") } }) } if (b) { if (f != a.length - 1) { $("#SelectedAttributeList").append("<li class='newLiStyle Plusc'><div class='plus'>+</div></li>") } b = false } } } }; function RemoveAttr(a) { var b = $("input[value^=" + a + "]")[0].nextElementSibling; FireCheckedEvent(b) } function FireCheckedEvent(c) { var a = true; for (var b = 1; b < c.parentNode.parentNode.parentNode.children.length; b++) { if (c.parentNode.parentNode.parentNode.children[b].children[0].checked & (c.parentNode.parentNode.parentNode.children[0].value == "N")) { a = false } } if (a) { if (c.src.indexOf("check") > 0) { c.src = GetFile("/Portals/0/Images/pagebk.PNG") } else { c.src = GetFile("/Portals/0/Images/check.PNG"); c.parentNode.parentNode.style.cssText = "font-weight: 700" } c.parentNode.children[0].children[0].click() } CurrentAttributeState(c) } function OnSortSelect(c) { var p = this.dataItem(c.item.index()); var j = GetQueryStringParams("q"); var f = GetQueryStringParams("division"); var h = GetQueryStringParams("p"); var l = GetQueryStringParams("f"); if (j == undefined) { j = "" } if (f == undefined) { f = "primary" } if (h == undefined) { h = 1 } var m = GetQueryStringParams("searchtype"); if (m != undefined && m != "") { var q = ""; switch (p.value.toLowerCase()) { case "l": q = "L"; break; case "a": q = "A"; break; case "d": q = "D"; break; default: q = "R"; break } switch (m.toLowerCase()) { case "advkey": var i = GetQueryStringParams("k_q"); var g = GetQueryStringParams("t_q"); var o = GetQueryStringParams("a_q"); var a = GetQueryStringParams("Sub_q"); var r = GetQueryStringParams("fa_q"); var d = GetQueryStringParams("fatv_q"); var k = GetQueryStringParams("all_q"); var n = GetQueryStringParams("et_q"); if (i == undefined) { i = "" } if (g == undefined) { g = "" } if (o == undefined) { o = "" } if (a == undefined) { a = "" } if (r == undefined) { r = "" } if (d == undefined) { d = "" } if (k == undefined) { k = "" } if (n == undefined) { n = "" } if (l != "" && l != undefined) { window.open("/search?searchtype=advkey&division=" + f + "&p=" + h + "&s=" + q + "&k_q=" + i + "&t_q=" + g + "&a_q=" + o + "&Sub_q=" + a + "&fa_q=" + r + "&fatv_q=" + d + "&all_q=" + k + "&et_q=" + n + "&f=" + l, "_self") } else { window.open("/search?searchtype=advkey&division=" + f + "&p=" + h + "&s=" + q + "&k_q=" + i + "&t_q=" + g + "&a_q=" + o + "&Sub_q=" + a + "&fa_q=" + r + "&fatv_q=" + d + "&all_q=" + k + "&et_q=" + n, "_self") } break; case "advpri": break; case "advsec": break; case "advisbn": var b = GetQueryStringParams("keyisbn"); if (b == undefined) { b = "" } if (l != "" && l != undefined) { window.open("/search?searchtype=advisbn&division=" + f + "&p=" + h + "&s=" + q + "&f=" + l + "&keyisbn=" + b, "_self") } else { window.open("/search?searchtype=advisbn&division=" + f + "&p=" + h + "&s=" + q + "&keyisbn=" + b, "_self") } break; default: break } } else { switch (p.value.toLowerCase()) { case "l": q = "L"; break; case "a": q = "A"; break; case "d": q = "D"; break; default: q = "R"; break } if (l != "" && l != undefined) { window.open("/search?q=" + j + "&division=" + f + "&p=" + h + "&s=" + q + "&f=" + l, "_self") } else { window.open("/search?q=" + j + "&division=" + f + "&p=" + h + "&s=" + q, "_self") } } } var img = GetFile("/Portals/0/Images/check.PNG"); var img1 = GetFile("/Portals/0/Images/pagebk.PNG"); function GetQueryStringParams(a) { var c = window.location.search.substring(1); var e = c.split("&"); for (var b = 0; b < e.length; b++) { var d = e[b].split("="); if (d[0] == a) { return d[1] } } } function CurrentAttributeState(k) { var r = []; $("input[name^=" + $(k).next()[0].value + "_AttributeInfo]").each(function () { var w = $(this).val().split("-"); var j = false; if (r.length > 0) { for (var x = 0; x < r.length; x++) { if (r[x].ATTRIBUTE_TYPE_SK == w[0] && r[x].ATTRIBUTE_TYPE_VALUE_SK == w[1]) { j = true } } } if (!j) { r.push({ ATTRIBUTE_TYPE_SK: w[0], ATTRIBUTE_TYPE_VALUE_SK: w[1], ATTRIBUTE_NAME: w[2], ATTRIBUTE_TYPE_VALUE: w[3], PROD_COUNT: w[4], IS_CURRENT: "Y", IS_SELECTED: "N", SEQNUM: w[6] }) } }); var f = []; $(".LeftMenu span input:checked").each(function () { var j = $(this).parent().next()[0].value.split("-"); var x = false; if (f.length > 0) { for (var w = 0; w < f.length; w++) { if (f[w].ATTRIBUTE_TYPE_SK == j[0] && f[w].ATTRIBUTE_TYPE_VALUE_SK == j[1]) { x = true } } } if (!x) { f.push({ ATTRIBUTE_TYPE_SK: j[0], ATTRIBUTE_TYPE_VALUE_SK: j[1], ATTRIBUTE_NAME: j[2], ATTRIBUTE_TYPE_VALUE: j[3], PROD_COUNT: j[4], IS_CURRENT: "N", IS_SELECTED: "Y", SEQNUM: j[6] }) } }); if (r.length > 0) { for (var u = 0; u < r.length; u++) { iscurrentchecked = false; if (f.length > 0) { for (var s = 0; s < f.length; s++) { if (r[u].ATTRIBUTE_TYPE_SK == f[s].ATTRIBUTE_TYPE_SK && r[u].ATTRIBUTE_TYPE_VALUE_SK == f[s].ATTRIBUTE_TYPE_VALUE_SK) { f[s].IS_SELECTED = "Y"; f[s].IS_CURRENT = "Y" } } } } } if (r.length > 0) { for (var u = 0; u < r.length; u++) { isexist = false; if (f.length > 0) { for (var s = 0; s < f.length; s++) { if (r[u].ATTRIBUTE_TYPE_SK == f[s].ATTRIBUTE_TYPE_SK && r[u].ATTRIBUTE_TYPE_VALUE_SK == f[s].ATTRIBUTE_TYPE_VALUE_SK) { isexist = true } } } if (!isexist) { f.push({ ATTRIBUTE_TYPE_SK: r[u].ATTRIBUTE_TYPE_SK, ATTRIBUTE_TYPE_VALUE_SK: r[u].ATTRIBUTE_TYPE_VALUE_SK, ATTRIBUTE_NAME: r[u].ATTRIBUTE_NAME, ATTRIBUTE_TYPE_VALUE: r[u].ATTRIBUTE_TYPE_VALUE, PROD_COUNT: r[u].PROD_COUNT, IS_CURRENT: "Y", IS_SELECTED: "N", SEQNUM: r[u].SEQNUM }) } } } $.ajax({ url: "/DesktopModules/SearchModifed/Handlers/AttributeState.ashx", type: "POST", cache: false, data: JSON.stringify(f), async: false, success: function (i) { } }); var p = getFacetQueryString(); var n = GetQueryStringParams("q"); if (n == undefined || n == "") { n = "" } var g = GetQueryStringParams("division"); if (g != undefined) { switch (g.toUpperCase()) { case "PRIMARY": break; case "SECONDARY": break; case "ALL": break; default: g = "all"; break } } else { g = "all" } var t = GetQueryStringParams("s"); if (t != undefined) { switch (t.toUpperCase()) { case "R": break; case "L": break; case "A": break; case "D": break; default: t = "R"; break } } else { t = "R" } var l = 1; var q = GetQueryStringParams("searchtype"); if (q != undefined && q != "") { switch (q.toLowerCase()) { case "advkey": var m = GetQueryStringParams("k_q"); var h = GetQueryStringParams("t_q"); var o = GetQueryStringParams("a_q"); var a = GetQueryStringParams("Sub_q"); var v = GetQueryStringParams("fa_q"); var e = GetQueryStringParams("fatv_q"); var b = GetQueryStringParams("all_q"); var d = GetQueryStringParams("et_q"); if (m == undefined) { m = "" } if (h == undefined) { h = "" } if (o == undefined) { o = "" } if (a == undefined) { a = "" } if (v == undefined) { v = "" } if (e == undefined) { e = "" } if (b == undefined) { b = "" } if (d == undefined) { d = "" } window.open("/search?searchtype=advkey&division=" + g + "&p=" + l + "&s=" + t + "&k_q=" + m + "&t_q=" + h + "&a_q=" + o + "&Sub_q=" + a + "&fa_q=" + v + "&fatv_q=" + e + "&all_q=" + b + "&et_q=" + d + "&f=" + p, "_self"); break; case "advpri": break; case "advsec": break; case "advisbn": var c = GetQueryStringParams("keyisbn"); if (c == undefined) { c = "" } if (p != "" && p != undefined) { window.open("/search?searchtype=advisbn&division=" + g + "&p=" + l + "&s=" + t + "&f=" + p + "&keyisbn=" + c, "_self") } else { window.open("/search?searchtype=advisbn&division=" + g + "&p=" + l + "&s=" + t + "&keyisbn=" + c, "_self") } break; break; default: break } } else { window.open("/search?q=" + n + "&division=" + g + "&p=" + l + "&s=" + t + "&f=" + p, "_self") } }; function getFacetQueryString() { var b = []; var a = ""; if ($(".LeftMenu span input:checked").length > 0) { for (var d = 0; ($(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input").length) > d; d += 2) { var c = 0; for (i = 0; i < b.length; i++) { if (b[i].Name == $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d + 1].value) { c = 1; b[i].Value = b[i].Value + "," + $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d].value } } if (c == 0) { b.push({ Name: $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d + 1].value, Value: $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d].value }) } } for (i = 0; i < b.length; i++) { a = a + ":" + b[i].Name + "-" + b[i].Value } } if (a != "") { return a.substring(1) } else { return a } } function TakeAttributes() { var b = []; if ($(".LeftMenu span input:checked").length > 0) { for (var d = 0; ($(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input").length) > d; d += 2) { var a = 0; for (i = 0; i < b.length; i++) { if (b[i].Name == $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d + 1].value) { a = 1; b[i].Value = b[i].Value + "," + $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d].value } } if (a == 0) { b.push({ Name: $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d + 1].value, Value: $(".LeftMenu span input:checked").parent().parent().next(".lefttext").children("input")[d].value }) } } var c = ""; for (i = 0; i < b.length; i++) { c = c + ":" + b[i].Name + "-" + b[i].Value } } return c }; var SuccessFlagForGA = false; function onselect(a) { var b = this.dataItem(a.item.index()); selectoperation(b.NAME, b.SK); if (SuccessFlagForGA) { GAPushTrackEvent("Lists", "Click", "Add-to-list") } } var isAddToListEntered = false; var listname = ""; function selectoperation(b, e) { isCart = false; isList = true; isQuote = false; callcount = 0; var d = ""; var a = ""; if ($("#selqty")[0].innerHTML == 0) { $("#msglbl").css("display", "block"); $("#MsgDiv").addClass("dnnFormWarning"); $("#MsgDiv").text("Please select one or more items to add to the List.").show(); $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); return false } var g = $(".ipadisbn").length; var i = ""; var f = ""; var h = ""; if (g != 0) { $("#Spanisbn").text(" "); $("#OutOfStockIsbn").text(" "); $.each($(".ipadisbn"), function () { var k = $(this).val().split("-"); var j = k[2]; var c = k[3]; if (j == "Y") { d = k[4] + "-" + k[1] + "/" + d; if (c != "OUT OF STOCK") { a = k[4] + "-" + k[1] + "/" + a } } if (j == "N") { i = k[0]; h = $("#ipadtit" + k[0]).val(); $("#Spanisbn").append("<li>" + i + "-" + h + "</li>") } if (c == "OUT OF STOCK") { f = k[0]; h = $("#ipadtit" + k[0]).val(); $("#OutOfStockIsbn").append("<li>" + f + "-" + h + "</li>") } }) } $("#hdnselectedvalue").val(d); $("#hdnNonOutofStockSelectedValues").val(a); listparams = b + "," + e; isAddToListEntered = false; if (i != "") { ShowSaleRestriction() } else { if (isList) { AddingItemToListrestriction(d, a) } } } function AddingItemToListrestriction(a, b) { if (a != b) { Showoutofstockheadcart(); return false } else { if (isList) { AddingItemToList(a) } } } var listname = ""; function AddingItemToList(b) { var e, d; if (listparams != "") { var a = listparams.split(","); e = a[0]; d = a[1] } b = b.substring(0, b.length - 1); b = b + ".," + d; $("#hdnselectedvalue").val(b); if (callcount != 0) { return false } callcount++; if (b == ".," + d) { return false } $(".k-window-actions.k-header").css("cursor", "pointer"); if (e == "Create New List") { var f = $("#Popuocreatelistbutton"); if ($("#UserIDHiddenField").val() == "0") { var f = $("#PopuocreatelistAnonbutton"); if (!f.data("kendoWindow")) { f.kendoWindow({ width: "600px", height: "440px", modal: true, draggable: false }); f.data("kendoWindow").center() } f.data("kendoWindow").open(); f.data("kendoWindow").center() } else { $(".k-window-actions.k-header").css("cursor", "pointer"); var f = $("#Popuocreatelistbutton"); if (!f.data("kendoWindow")) { f.kendoWindow({ width: "600px", height: "380px", modal: true, draggable: false }); f.data("kendoWindow").center() } f.data("kendoWindow").open(); f.data("kendoWindow").center() } $(".popurerrordiv").removeClass("dnnFormSuccess dnnFormWarning").text("").hide(); $("#txtcreatelistbox").removeClass("removeItalic").val("i.e. wish-list, to booklist next year, save for later"); f.data("kendoWindow").open(); f.data("kendoWindow").center(); $(".k-icon.k-i-close").hide(); $("a.k-window-action.k-link").mouseover(function () { $("a.k-window-action.k-link").parent().css("background-image", "url('./Portals/0/images/close.png') !important"); return false }); $("#CreateListLoginButton").click(function () { if ($("#CreateListAnonTextBox").val() == "i.e. wish-list, to booklist next year, save for later" || $("#CreateListAnonTextBox").val().trim() == "") { $("#errorDiv4").removeClass("dnnFormSuccess").addClass("dnnFormWarning").html("Please enter list name.   ").show(); return false } var c = httpGet(GetFile("/DesktopModules/List/Handlers/ListHandler.ashx?Action=AnonList&ListName=" + $("#CreateListAnonTextBox").val() + "&value=" + b)); if (b.length > 0) { GAPushTrackEvent("Lists", "Click", "Add-to-list") } GAPushTrackEvent($("#CreateListAnonTextBox").val(), "Click", "Create-Lists"); $("#CreateListAnonTextBox").val("i.e. wish-list, to booklist next year, save for later"); f.data("kendoWindow").close(); OpenLoginWindowFromList(); return false }); $("#CreateListSignUpButton").click(function () { if ($("#CreateListAnonTextBox").val() == "i.e. wish-list, to booklist next year, save for later" || $("#CreateListAnonTextBox").val().trim() == "") { $("#errorDiv4").removeClass("dnnFormSuccess").addClass("dnnFormWarning").html("Please enter list name.   ").show(); return false } var c = httpGet(GetFile("/DesktopModules/List/Handlers/ListHandler.ashx?Action=AnonList&ListName=" + $("#CreateListAnonTextBox").val() + "&value=" + b)); if (b.length > 0) { GAPushTrackEvent("Lists", "Click", "Add-to-list") } GAPushTrackEvent($("#CreateListAnonTextBox").val(), "Click", "Create-Lists"); $("#CreateListAnonTextBox").val("i.e. wish-list, to booklist next year, save for later"); f.data("kendoWindow").close(); OpenWindowFromList(); return false }); $("#CancelCreateListButton").click(function () { f.data("kendoWindow").close(); $("#txtcreatelistbox").val("i.e. wish-list, to booklist next year, save for later") }) } else { if (e == "Shopping List" && $("#UserIDHiddenField")[0].value == "0") { var f = $("#Popuocreateuserbutton"); if (!f.data("kendoWindow")) { f.kendoWindow({ width: "600px", height: "270px", modal: true, draggable: false }); f.data("kendoWindow").center() } f.data("kendoWindow").open(); f.data("kendoWindow").center(); $("#SignupButton").click(function () { f.data("kendoWindow").close(); var c = GetHandler(GetFile("/DesktopModules/List/Handlers/ListHandler.ashx?Action=AnonShoppingList&ListName=&value=" + b)); OpenWindowFromList() }); $("#LoginButton").click(function () { f.data("kendoWindow").close(); var c = GetHandler(GetFile("/DesktopModules/List/Handlers/ListHandler.ashx?Action=AnonShoppingList&ListName=&value=" + b)); OpenLoginWindowFromList() }) } else { var g = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Action=LIST&ListName=&value=" + b + "&UserSk=" + $("#UserIDHiddenField").val())); if (g == "0") { } else { SuccessFlagForGA = true; $("#addedLabel").show(); $("#addtolstdiv1").hide() } return false } } isAddToListEntered = true; isList = false; isokavail = false; listparams = "" } function kendoddlquoteclick() { if ($("#AddtoQuote-list ul.k-list li:first").text().toLowerCase() == "add to quote") { $("#AddtoQuote-list ul.k-list li:first").remove() } } function OnQuoteSelect(a) { if ($("#selqty")[0].innerHTML == 0) { $("#msglbl").css("display", "block"); $("#MsgDiv").addClass("dnnFormWarning"); $("#MsgDiv").text("Please select one or more items to add to the Quote.").show(); $("#AddtoQuoteDiv select").data("kendoDropDownList").text("Add to quote"); return false } else { var b = this.dataItem(a.item.index()); selectquoteoperation(b.NAME, b.SK) } } $(".ModCmsPageResultC").css("display", "none"); $(".showres").css("display", "none"); var eventflag = false; function productpages() { $(".sepimg").css("height", "975px"); $(".Noimg").css("display", "none"); $(".ModCmsPageResultC").css("display", "block"); $("#cmspagediv").css("display", "block"); $(".ModCmsPageResultC").css("float", "right"); $(".showres").css("display", "block"); $(".ktab").css("position", "absolute"); $(".ktab").css("margin-left", "250px"); $("#tab1").css("display", "none"); $("#tab2").css("display", "block"); $("#pagestab").css("width", "98%"); $("#productstab").css("width", "20%"); $("#productstab span").addClass("Padtopt"); $("#pagestab span").css("padding-top", "4px"); $("#pagestab").removeClass("tabPG"); $("#pagestab").addClass("tabPR"); $("#productstab").removeClass("tabPR"); $("#productstab").addClass("tabPG"); $("#cntDiv").addClass("cntDivss") } $(document).ready(function () { $("#CreateListButton").click(function () { if ($("#txtcreatelistbox").val() == "i.e. wish-list, to booklist next year, save for later") { $(".popurerrordiv").removeClass("dnnFormSuccess").addClass("dnnFormWarning").html("Please enter list name.   ").show(); return false } else { if ($("#txtcreatelistbox").val().trim().length == 0) { $(".popurerrordiv").removeClass("dnnFormSuccess").addClass("dnnFormWarning").html("Please enter list name.   ").show(); return false } else { listname = $("#txtcreatelistbox").val().trim(); var l = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Action=LIST&ListName=" + $("#txtcreatelistbox").val() + "&value=" + $("#hdnselectedvalue").val() + "&UserSk=" + $("#UserIDHiddenField").val())); if (parseInt(l) == 0) { $(".popurerrordiv").removeClass("dnnFormSuccess").addClass("dnnFormWarning").text("List Name already exist").show(); return false } else { if (l == "Invalid") { $("txtcreatelistbox").val("i.e. wish-list, to booklist next year, save for later"); $("#Popuocreatelistbutton").data("kendoWindow").close() } else { GAPushTrackEvent("Lists", "Click", "Add-to-list"); GAPushTrackEvent($("#txtcreatelistbox").val(), "Click", "Create-Lists"); $("txtcreatelistbox").val("i.e. wish-list, to booklist next year, save for later"); $("#Popuocreatelistbutton").data("kendoWindow").close(); $("#addtolstdiv1 select").data("kendoDropDownList").dataSource.insert(0, { NAME: $("#txtcreatelistbox").val(), SK: l }); $("#addtolstdiv1 select").data("kendoDropDownList").refresh(); if ($("#WishList")[0] != undefined) { var j = $("#WishList")[0].innerText; if (j == "") { j = $("#WishList")[0].innerHTML } if (j == "") { $("#WishList")[0].innerText = "(1)"; $("#WishList")[0].innerHTML = "(1)" } else { var k = j.indexOf(")"); var i = j.substring(1, k); listcount = Number(i) + 1; $("#WishList")[0].innetText = "(" + listcount + ")"; $("#WishList")[0].innerHTML = "(" + listcount + ")" } $("#addedLabel").show(); $("#addtolstdiv1").hide() } } } return false } } }); $("#btnCreate").click(function () { if ($("#txtQuoteName").val().trim().length == 0) { $("#OuterWarninCreate").show(); $("#WarninCreate").html("Please enter Custom quote reference"); return false } else { $.ajax({ url: GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Action=CREATEQUOTE&QuoteName=" + $("#txtQuoteName").val() + "&AccountSK=" + $("#hdnAccountSK").val() + "&value=" + $("#hdnselectedvalue").val() + "&AccountNo=" + accountname), dataType: "json", success: function (i) { if (i.indexOf("|") != -1) { $("#AddtoQuoteDiv select").data("kendoDropDownList").dataSource.insert(0, { NAME: $("#txtQuoteName").val(), SK: i }); $("#AddtoQuoteDiv select").data("kendoDropDownList").refresh(); $("#QuotePopup").data("kendoWindow").close(); $("#QuoteAdded").show(); $("#AddtoQuoteDiv").hide() } else { $("#OuterWarninCreate").show(); $("#WarninCreate").html(i) } } }); return false } }); $("#AddtoQuoteDiv select").kendoDropDownList({ animation: false, select: OnQuoteSelect, open: kendoddlquoteclick, cache: false, dataTextField: "NAME", dataValueField: "SK" }); $("#AddtoQuoteDiv select").data("kendoDropDownList").text("Add to quote"); var c = GetQueryStringParams("q"); if (c != "" && c != undefined) { c = decodeURIComponent(c); $("#TextSearch").val(c); $("#TextSearchFooter").val(c) } var f = e()["division"]; if (f != null || f != "") { if (f == undefined) { $("#ddlschooltypefooter").val("2"); $("#ddlschooltypetop").val("2"); $("#ddlschooltypetop").data("kendoDropDownList").value("2") } else { switch (f.toLowerCase()) { case "primary": $("#ddlschooltypefooter").val("0"); $("#ddlschooltypetop").val("0"); $("#ddlschooltypetop").data("kendoDropDownList").value("0"); break; case "secondary": $("#ddlschooltypefooter").val("1"); $("#ddlschooltypetop").val("1"); $("#ddlschooltypetop").data("kendoDropDownList").value("1"); break; default: $("#ddlschooltypefooter").val("2"); $("#ddlschooltypetop").val("2"); $("#ddlschooltypetop").data("kendoDropDownList").value("2"); break } } } $("#addtocartbtn").click(function () { if ($("#selqty")[0].innerHTML == 0) { $("#msglbl").css("display", "block"); $("#MsgDiv").addClass("dnnFormWarning"); $("#MsgDiv").text("Please select one or more items to add to the Cart.").show(); return false } else { return true } }); $("#addtolstdiv1 select").kendoDropDownList({ animation: false, select: onselect, open: b, cache: false, dataTextField: "NAME", dataValueField: "SK" }); function b() { if ($("#HeaderAddtoList-list ul.k-list li:first").text().toLowerCase() == "add to list") { $("#HeaderAddtoList-list ul.k-list li:first").remove() } } $("#AddtoQuoteDiv select").live("change", function () { $("#AddtoQuoteDiv select").data("kendoDropDownList").text("Add to quote") }); $("#addtolstdiv1 select").live("change", function () { $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list") }); $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); $("#AddtoQuoteDiv select").data("kendoDropDownList").text("Add to Quote"); $(".repouter").live("each", function () { $(this).find(".left2 .sub44 .addtolstdiv select").kendoDropDownList(); $(this).find(".left2 .sub44 .addtolstdiv select").data("kendoDropDownList").text("Add to list") }); $(".center").live("click", function () { jQuery(".page1").removeClass("Highlight").addClass("removehighlight"); jQuery(this).parent().removeClass("removehighlight").addClass("Highlight"); jQuery(this).css("color", "whiite !important") }); $("#txtAccountName").kendoAutoComplete({ dataTextField: "REGISTERED_BUSINESS_NAME", filter: "contains", dataValueField: "TRADING_PARTNER_ACCOUNT_SK", select: OnUserSelect, dataSource: { transport: { read: { type: "GET", url: GetFile("/DesktopModules/Quote/Handlers/QuoteHandler.ashx?QuoteSK= &Value= &Action=ACCOUNT"), contentType: "application/json; charset=utf-8", dataType: "json"}}} }); $(".dnnFormValidationSummary").css("display", "none"); var a = $("#Pagenum").val(); if (a > 0) { $("#PagesCount")[0].innerHTML = a; $("#Hidpagecnt").val(a) } else { $("#PagesCount")[0].innerHTML = 0; $("#Hidpagecnt").val(0) } var d = $("#PagesCount")[0].innerHTML; var g = $("#PrdCount")[0].innerHTML; if (g == 0 & d > 0) { $(".Nrfrdiv").css("display", "block"); $("#searAct").css("display", "none"); $("#searDet").css("display", "none"); $("#PrdCount")[0].innerHTML = 0; $(".ktab").css("margin-top", "-320px"); $(".Nrfrdiv").css("margin-top", "80px"); $(".Nrfrdiv").css("margin-left", "235px"); $("#tabstrip1").css("height", "63px"); $("#Img1").css("display", "none"); $("#Div3").css("display", "none") } if (g > 0 & d == 0) { $("#pagestab").css("display", "none") } function e() { var m = [], k; var j = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"); for (var l = 0; l < j.length; l++) { k = j[l].split("="); m.push(k[0]); m[k[0]] = k[1] } return m } function h() { $(".sepimg").css("height", "975px"); $(".Noimg").css("display", "none"); $("#contdiv").css("display", "none"); $("#searchfilterdiv").css("display", "none"); $(".showres").css("display", "block"); $(".ModCmsPageResultC").css("display", "block"); $("#cmspagediv").css("display", "block"); $(".ModCmsPageResultC").css("float", "right"); $(".ktab").css("position", "absolute"); $(".ktab").css("margin-left", "250px"); $("#tab1").css("display", "none"); $("#tab2").css("display", "block"); $("#pagestab").css("width", "98%"); $("#productstab").css("width", "20%"); $("#productstab span").addClass("Padtopt"); $("#pagestab span").css("padding-top", "4px"); $("#pagestab").removeClass("tabPG"); $("#pagestab").addClass("tabPR"); $("#productstab").removeClass("tabPR"); $("#productstab").addClass("tabPG"); $("#cntDiv").addClass("cntDivss"); $("#PrdCount")[0].innerHTML = 0; $("#Div3").css("display", "none") } $(".lefttext").click(function () { $(this).prev().find(".chkbox").click() }); PostBack(); Sys.WebForms.PageRequestManager.getInstance().add_endRequest(PostBack); $(".scrolldiv").mCustomScrollbar() }); function QtyTxtchange(f, d) { eventflag = true; var b = parseInt($(f).val()) || 0; $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); if ($("#addedLabel")[0].style.display == "block") { $("#addedLabel").css("display", "none"); $("#addtolstdiv1").css("display", "block") } if ($("#QuoteAdded")[0].style.display == "block") { $("#QuoteAdded").css("display", "none"); $("#AddtoQuoteDiv").css("display", "block") } if ($("#AddedToCart")[0].style.display == "block") { $("#AddedToCart").css("display", "none"); $("#CartAdd").css("display", "block") } var c = $("#" + d).prev(); var g = $("#" + d).next(); if (b != 0) { if (c.checked != true) { c.value = true; c.checked = true; g.src = GetFile("/Portals/0/Images/check.PNG"); count++; var e = parseInt($("#SelectedCount")[0].value); e = e + 1 } e = count; $(".selSer").css("background-color", "#21B4E6"); $(".selSer").css("color", "#FFFFFF"); $("#SelectedCount")[0].value = e; $("#MsgDiv").hide(); if (e == $("#searDet #div1 #chbox input[type=checkbox]").length) { $("#ImgSelect").attr("src", img); $("#selqty")[0].innerHTML = "All"; $("#MainChk")[0].checked = true; $("#MsgDiv").hide() } g.attr("src", img); c.click(); $("#" + d).addClass("ipadisbn"); $("#selqty")[0].innerHTML = $(".ipadisbn").length; flag = false } else { $("#" + d).removeClass("ipadisbn"); if ((c.checked == true)) { c.checked = false; c.value = false; g.src = GetFile("/Portals/0/Images/pagebk.PNG"); count-- } var e = parseInt($("#SelectedCount")[0].value); if (e == 0) { $(".selSer").css("background-color", "White"); $(".selSer").css("color", "#707070") } else { e = e - 1 } $("#SelectedCount")[0].value = e; $("#selqty")[0].innerHTML = $(".ipadisbn").length; g.attr("src", img1); $("#ImgSelect").attr("src", img1); c.checked = false; $("#MainChk")[0].checked = false; flag = true } var a = g.onclick; if (typeof (a) == "function") { a.call(g) } } var chkboxlength = $("#searDet")[0].childNodes.length; var count = 0; $("#selectall").live("click", function () { if ($("#addedLabel")[0].style.display == "block") { $("#addedLabel").css("display", "none"); $("#addtolstdiv1").css("display", "block") } if ($("#QuoteAdded")[0].style.display == "block") { $("#QuoteAdded").css("display", "none"); $("#AddtoQuoteDiv").css("display", "block") } if ($("#AddedToCart")[0].style.display == "block") { $("#AddedToCart").css("display", "none"); $("#CartAdd").css("display", "block") } var b = $("#ImgSelect").attr("src"); var c = b.split("/"); $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); if (c[c.length - 1].toLowerCase() == "pagebk.png") { count = $("#searDet #div1 #chbox input[type=checkbox]").length; $(".selSer").css("background-color", "#21B4E6"); $(".selSer").css("color", "#FFFFFF"); $("#ImgSelect").attr("src", img); $("#MainChk")[0].checked = true; var d = 0; for (var a = 0; a < $("#searDet #div1 #chbox input[type=checkbox]").length; a++) { $("#searDet #div1 #chbox input[type=checkbox]")[a].checked = true; $("#searDet #div1 #chbox img")[a].src = img; if ($("#searDet #div1 input[type=text]")[a].value == 0) { $("#searDet #div1 input[type=text]")[a].value = 1 } d = d + 1 } $("#SelectedCount")[0].value = d; $("#selqty")[0].innerHTML = "All"; $("#MsgDiv").hide(); $(".allisbn").addClass("ipadisbn") } else { $(".allisbn").removeClass("ipadisbn"); count = 0; $(".selSer").css("background-color", "White"); $(".selSer").css("color", "#707070"); $("#selqty")[0].innerHTML = $(".ipadisbn").length; $("#ImgSelect").attr("src", img1); $("#MainChk")[0].checked = false; for (var a = 0; a < $("#searDet #div1 #chbox input[type=checkbox]").length; a++) { $("#searDet #div1 #chbox input[type=checkbox]")[a].checked = false; $("#searDet #div1 #chbox img")[a].src = img1; if (($("#searDet #div1 input[type=text]")[a].value == 1)) { $("#searDet #div1 input[type=text]")[a].value = 0 } } $("#SelectedCount")[0].value = 0; $("#selqty")[0].innerHTML = $(".ipadisbn").length } }); var flag = true; $("#searDet #div1 #chkqtydiv #chbox img").bind("click", function () { if (eventflag == true) { eventflag = false; return false } else { var f = 0; $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); f = parseInt(this.parentNode.parentNode.children[1].children[0].children[0].children[0].value); var c = this.parentNode.parentNode.children[1].children[0].id; if ($("#addedLabel")[0].style.display == "block") { $("#addedLabel").css("display", "none"); $("#addtolstdiv1").css("display", "block") } if ($("#QuoteAdded")[0].style.display == "block") { $("#QuoteAdded").css("display", "none"); $("#AddtoQuoteDiv").css("display", "block") } if ($("#AddedToCart")[0].style.display == "block") { $("#AddedToCart").css("display", "none"); $("#CartAdd").css("display", "block") } var e = this.src; var a = e.split("/"); if (a[a.length - 1].toLowerCase() == "pagebk.png") { $(this).prev().addClass("ipadisbn"); if ($("#" + c + " input[type=text]")[0].value == 0) { $("#" + c + " input[type=text]")[0].value = 0 + 1 } count++; var b = parseInt($("#SelectedCount")[0].value); b = b + 1; $(".selSer").css("background-color", "#21B4E6"); $(".selSer").css("color", "#FFFFFF"); $("#SelectedCount")[0].value = b; $("#selqty")[0].innerHTML = $(".ipadisbn").length; $("#MsgDiv").hide(); if (b == $("#searDet #div1 #chbox input[type=checkbox]").length) { $("#ImgSelect").attr("src", img); $("#selqty")[0].innerHTML = "All"; $("#MainChk")[0].checked = true; $("#MsgDiv").hide() } this.src = img; this.parentNode.children[0].click(); flag = false } else { $(this).prev().removeClass("ipadisbn"); var d = $(this).prev().val().split("-"); d[1] = "1"; $(this).prev().val(d.join("-")); if (($("#" + c + " input[type=text]")[0].value == 1) || ($("#" + c + " input[type=text]")[0].value > 1)) { $("#" + c + " input[type=text]")[0].value = 0 } count--; var b = parseInt($("#SelectedCount")[0].value); if (b == 0) { $(".selSer").css("background-color", "White"); $(".selSer").css("color", "#707070") } else { b = b - 1 } $("#SelectedCount")[0].value = b; $("#selqty")[0].innerHTML = $(".ipadisbn").length; this.src = img1; $("#ImgSelect").attr("src", img1); this.parentNode.children[0].checked = false; $("#MainChk")[0].checked = false; flag = true } } }); var listparams = ""; var Salerestrictionwindow; var Outofstocksinglewindow; var Outofstockwindow; function closesalerestrict() { if (isCart && isokavail) { AddToCartItemsrestriction($("#hdnselectedvalue").val(), $("#hdnNonOutofStockSelectedValues").val()) } else { if (isCart) { isCart = false } } if (isList && isokavail) { AddingItemToListrestriction($("#hdnselectedvalue").val(), $("#hdnNonOutofStockSelectedValues").val()) } else { if (isList) { isList = false } } } function ShowSaleRestriction() { Salerestrictionwindow = $("#OrderRestrictPopup"); if (!Salerestrictionwindow.data("kendoWindow")) { Salerestrictionwindow.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false, close: closesalerestrict }); Salerestrictionwindow.data("kendoWindow").center() } Salerestrictionwindow.data("kendoWindow").open(); Salerestrictionwindow.data("kendoWindow").center() } $("#Ok").click(function () { isokavail = true; Salerestrictionwindow = $("#OrderRestrictPopup"); Salerestrictionwindow.data("kendoWindow").close(); $("#Spanisbn").text("") }); function ShowSaleRestrictionquote() { var a = $("#OrderRestrictPopupQuote"); if (!a.data("kendoWindow")) { a.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false }); a.data("kendoWindow").center() } a.data("kendoWindow").open(); a.data("kendoWindow").center(); $("#OKQuote").click(function () { a.data("kendoWindow").close(); $("#Spanisbn").text("") }) } function Showoutofstockcart() { Outofstocksinglewindow = $("#SoutofStockPopup"); if (!Outofstocksinglewindow.data("kendoWindow")) { Outofstocksinglewindow.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false }) } Outofstocksinglewindow.data("kendoWindow").open(); Outofstocksinglewindow.data("kendoWindow").center() } function closeoutofstock() { if (isList && $("#OutOfStockIsbn").text() != "") { AddingItemToList($("#hdnNonOutofStockSelectedValues").val()); $("#OutOfStockIsbn").text("") } else { if (isList) { AddingItemToList($("#hdnselectedvalue").val()) } } if (isCart && $("#OutOfStockIsbn").text() != "") { AddToCartItems($("#hdnNonOutofStockSelectedValues").val(), true); $("#OutOfStockIsbn").text("") } else { if (isCart) { AddToCartItems($("#hdnselectedvalue").val(), false) } } } function Showoutofstockheadcart() { Outofstockwindow = $("#OutofstockPopup"); if (!Outofstockwindow.data("kendoWindow")) { Outofstockwindow.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false, close: closeoutofstock }); Outofstockwindow.data("kendoWindow").center() } Outofstockwindow.data("kendoWindow").open(); Outofstockwindow.data("kendoWindow").center() } $("#OkStock").click(function () { $("#OutOfStockIsbn").text(""); $("#OutofstockPopup").data("kendoWindow").close() }); function PostBack() { $("#custommessage").live("click", function () { $(this).parent().css("display", "none") }); var c = 0; for (var f = 0; f < $("#dsource #chbox input[type=checkbox]").length; f++) { if ($("#dsource #chbox input[type=checkbox]")[f].checked) { $("#dsource #chbox input[type=checkbox]")[f].parentNode.parentNode.childNodes[3].src = img; $("#dsource #ThirdDiv")[f].style.cssText = "font-weight: 700"; $(".ktab1").css("float", "left") } } for (var f = 0; f < $("#searDet #div1 #chkqtydiv #chbox input[type=checkbox]").length; f++) { if ($("#searDet #div1 #chkqtydiv #chbox input[type=checkbox]")[f].checked) { $("#searDet #div1 #chkqtydiv #chbox input[type=checkbox]")[f].parentNode.children[1].src = img; if ($("#SelectedCount").val() != "") { c = parseInt($("#SelectedCount")[0].value); $("#SelectedCount")[0].value = (c + 1) } else { $("#SelectedCount")[0].value = (c + 1) } } } $("#selqty")[0].innerHTML = $(".ipadisbn").length; $("#Recommended").kendoDropDownList({ animation: false }); $(".detailspan").click(function () { var l = $(this).parent().parent().parent().parent().next().find("img")[0]; var j = $(this).parent().parent().parent().parent().next().find("b")[0]; var k = $(this).parent().parent().parent().parent().next().find("b")[1]; var h = $(this).parent().parent().parent().parent().next().find("a")[0]; if ($(this).parent().parent().parent().parent().next().hasClass("active")) { $(this).parent().parent().parent().parent().next().slideToggle(); $(this).parent().parent().parent().parent().next().removeClass("active"); $(this)[0].innerHTML = " MORE"; $(this)[0].style.cssText = "padding-left: 38px; padding-right:38px;"; l.style.display = "none" } else { $(this).parent().parent().parent().parent().next().slideToggle(); $(this).parent().parent().parent().parent().next().addClass("active"); $(this)[0].innerHTML = " LESS"; $(this)[0].style.cssText = "padding-left: 41px; padding-right:41px;"; var i = $(this).prev().text(); if ($("#ismoreopened" + i).val() == "N") { l.style.display = "block"; $.ajax({ type: "POST", url: GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Value=&Action=REFINESEARCHPRODUCTATTR&productsk=" + i + "&division=" + GetQueryStringParams("division")), dataType: "json", contentType: "application/json; charset=utf-8", success: function (p) { if (p != "N") { var m = p.length; $("#ismoreopened" + i).val("Y"); var o = ""; if ($("#StudentAttributes" + i)[0].innerHTML != undefined) { o = $("#StudentAttributes" + i)[0].innerHTML } var n = ""; if ($("#ProductAttributes" + i)[0].innerHTML != undefined) { n = $("#ProductAttributes" + i)[0].innerHTML } $.each(p, function (t, s) { if (s.ATT_GROUP == "STUDENT") { o += "<div style='margin-left: 3px'>" + s.ATTRIBUTE_NAME + ": "; var r = s.ATTRIBUTE_TYPE_VALUE.split(","); var q = s.ATTRIBUTE_TYPE_value_SK.split(","); for (var t = 0; t < q.length; t++) { if (q.length > 1) { if (t < q.length - 1) { o += '<a style=color:#707070 href="/search?q=&division=' + GetQueryStringParams("division") + "&f=" + s.ATTRIBUTE_TYPE_SK + "-" + q[t] + '">' + r[t] + "</a>, " } if (t == q.length - 1) { o += 'and <a style=color:#707070 href="/search?q=&division=' + GetQueryStringParams("division") + "&f=" + s.ATTRIBUTE_TYPE_SK + "-" + q[t] + '">' + r[t] + "</a>" } } else { o += '<a style=color:#707070 href="/search?q=&division=' + GetQueryStringParams("division") + "&f=" + s.ATTRIBUTE_TYPE_SK + "-" + q[t] + '">' + r[t] + "</a>, " } } o = o.trim().replace(/^,|,$/g, ""); o = o.trim().replace(", and", " and"); o += " | </div>" } $("#StudentAttributes" + i)[0].innerHTML = o.substring(0, (o.length - 9)) + "</div>"; if (s.ATT_GROUP == "PRODUCT") { n += "<div style='margin-left: 3px'>" + s.ATTRIBUTE_NAME + ": "; var r = s.ATTRIBUTE_TYPE_VALUE.split(","); var q = s.ATTRIBUTE_TYPE_value_SK.split(","); for (var t = 0; t < q.length; t++) { if (q.length > 1) { if (t < q.length - 1) { n += '<a style=color:#707070 href="/search?q=&division=' + GetQueryStringParams("division") + "&f=" + s.ATTRIBUTE_TYPE_SK + "-" + q[t] + '">' + r[t] + "</a>, " } if (t == q.length - 1) { n += 'and <a style=color:#707070 href="/search?q=&division=' + GetQueryStringParams("division") + "&f=" + s.ATTRIBUTE_TYPE_SK + "-" + q[t] + '">' + r[t] + "</a>" } } else { n += '<a style=color:#707070 href="/search?q=&division=' + GetQueryStringParams("division") + "&f=" + s.ATTRIBUTE_TYPE_SK + "-" + q[t] + '">' + r[t] + "</a>, " } } n = n.trim().replace(/^,|,$/g, ""); n = n.replace(", and", " and"); n += " | </div>" } $("#ProductAttributes" + i)[0].innerHTML = n.substring(0, (n.length - 9)) + "</div>" }) } if (o == undefined || o.trim() == "") { j.style.display = "none" } else { j.style.display = "block" } if (n == undefined || n.trim() == "") { k.style.display = "none" } else { k.style.display = "block" } if (j.style.display == "none" && k.style.display == "block") { k.style.display = "block"; k.style.cssText = ("margin-top: -55px;padding-left: 15px;display: block;"); h.style.cssText = ("margin-top: -35px;") } l.style.display = "none" } }) } } }); function e(h) { alert(h) } if ($.browser.msie) { } function g(h) { var i = (h.which) ? h.which : h.keyCode; if (!(i == 8 || i == 46) && (i < 48 || i > 57)) { return false } } function d(h) { var i = this.dataItem(h.item.index()); $("#msglbl").css("display", "block"); $("#MsgDiv").addClass("dnnFormSuccess"); $("#MsgDiv").text("ITEMS ARE ADDED TO THE " + i.text.toUpperCase() + " SUCCESSFULLY.").show() } $("#productstab span").addClass("Padtop"); $("#pagestab").live("click", function () { $(".sepimg").css("height", "975px"); $("#contdiv").css("display", "none"); $("#searchfilterdiv").css("display", "none"); $(".ModCmsPageResultC").css("display", "block"); $("#cmspagediv").css("display", "block"); $(".showres").css("display", "block"); $(".ktab").css("position", "absolute"); $(".ktab").css("margin-left", "250px"); $("#tab1").css("display", "none"); $("#tab2").css("display", "block"); $("#pagestab").css("width", "98%"); $("#productstab").css("width", "20%"); $("#productstab span").addClass("Padtopt"); $("#pagestab span").css("padding-top", "4px"); $("#pagestab").removeClass("tabPG"); $("#pagestab").addClass("tabPR"); $("#productstab").removeClass("tabPR"); $("#productstab").addClass("tabPG"); $("#cntDiv").addClass("cntDivss"); $(".Nrfrdiv").css("display", "none"); $(".ktab").css("margin-top", "0px"); $("#tabstrip1").css("height", "auto") }); $("#productstab").live("click", function () { if ($("#PrdCount")[0].innerHTML == 0) { $("#searAct").css("display", "none"); $(".Nrfrdiv").css("display", "block"); $(".ktab").css("margin-top", "-320px"); $(".Nrfrdiv").css("margin-top", "80px"); $(".Nrfrdiv").css("margin-left", "235px"); $("#tabstrip1").css("height", "63px"); $("#Img1").css("display", "none"); $("#Div3").css("display", "none") } $(".sepimg").css("height", "930px"); $(".ModCmsPageResultC").css("display", "none"); $("#cmspagediv").css("display", "none"); $(".showres").css("display", "none"); $("#productstab").removeClass("tabPG"); $("#productstab").addClass("tabPR"); $("#pagestab").removeClass("tabPR"); $(".ktab").css("position", "relative"); $(".ktab").css("margin-left", "0px"); $("#pagestab").addClass("tabPG"); $("#productstab span").addClass("Padtop"); $("#pagestab span").css("padding-top", "2px"); $("#searchfilterdiv").css("display", "block"); $("#tab1").css("display", "block"); $("#tab2").css("display", "none") }); $(".stdrepeater").live("click", function () { if ($(this).find("div input:button")[1].value != "ADDED TO CART") { $(this).find("div input:button")[1].value = "ADDED TO CART"; $(this).find("div input:button").css("cursor", "default"); $(this).find("div input:button")[1].style.cssText = "color:white !important;cursor:default;margin-top: 5px;"; $(this).find("div img").addClass("displaynone"); $(this).removeClass("AddtoCart"); $(this).removeClass("stdrepeater"); $(this).addClass("Added"); $(this).addClass("addedstd") } return false }); function a() { window.location.href = "productdetail.aspx" } function b() { window.scrollTo(0, 0) } }; function calculateTotal(b, c, d, e, g, f) { var a = parseInt($(b).val()) || 0; if (a != 0) { $(b).parent().children().first().val(a); $("#" + c).val(""); $("#" + c).addClass("ipadisbn"); $("#" + c).val(c + "-" + a + "-" + d + "-" + e + "-" + g + "-" + f) } else { $("#" + c).removeClass("ipadisbn") } } function Onchanged() { if ($("#selqty")[0].innerHTML == 0) { $("#msglbl").css("display", "block"); $("#MsgDiv").addClass("dnnFormWarning"); $("#MsgDiv").text("Please select one or more items to add to the List.").show(); $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); return false } else { $("#addtolstdiv1 select").data("kendoDropDownList").text("Add to list"); $("#msglbl").css("display", "none"); return true } } function OpenWindowFromList() { var a = $("#window"), b = $("#signuplnk").bind("click", function () { a.data("kendoWindow").open() }); $("#signuplnk").click(function (c) { a.data("kendoWindow").open(); a.data("kendoWindow").center() }); onClose = function () { b.show() }; if (!a.data("kendoWindow")) { a.kendoWindow({ width: "500px", height: "993px", content: GetFile("/signup.aspx"), close: onClose, modal: true, draggable: false }); a.data("kendoWindow").center(); $(".k-icon.k-i-close").css("display", "none"); $("a.k-window-action.k-link").mouseover(function () { $("a.k-window-action.k-link").parent().css("background-image", "url('./Portals/0/images/close.png') !important"); return false }) } } function OpenLoginWindowFromList() { var a = $("#loginWindow"); a.kendoWindow({ width: "491px", height: "317px", content: GetFile("/cengageecommerce.aspx"), modal: true, draggable: true, resizable: true }); a.data("kendoWindow").center(); a.data("kendoWindow").open(); a.data("kendoWindow").center(); if ($.browser.msie) { $("#loginWindow").css({ height: "362px", "margin-left": "-9px", width: "509px" }); $("#loginWindow").parent().css("height", "317px") } else { if (navigator.userAgent.match(/AppleWebKit/) && !navigator.userAgent.match(/Chrome/)) { $("#loginWindow").css({ height: "361px", "margin-left": "-9px", width: "507px" }); $("#loginWindow").parent().css("height", "317px") } else { $("#loginWindow").css({ height: "362px", "margin-left": "-9px", width: "509px" }); $("#loginWindow").parent().css("height", "317px") } } $("a.k-window-action.k-link").mouseover(function () { $("a.k-window-action.k-link").parent().css("background-image", "url('./Portals/0/images/close.png') !important"); return false }) } function CreateShoppingList(a) { if ($("#UserIDHiddenField").val() == "0") { var b = $("#Popuocreateuserbutton"); if (!b.data("kendoWindow")) { b.kendoWindow({ width: "600px", height: "270px", modal: true, draggable: false }); b.data("kendoWindow").center() } b.data("kendoWindow").open(); b.data("kendoWindow").center() } else { $(".k-window-actions.k-header").css("cursor", "pointer"); var b = $("#Popuocreatelistbutton"); if (!b.data("kendoWindow")) { b.kendoWindow({ width: "600px", height: "380px", modal: true, draggable: false }); b.data("kendoWindow").center() } $(".popurerrordiv").removeClass("dnnFormSuccess dnnFormWarning").text("").hide(); $("#txtcreatelistbox").removeClass("removeItalic").val("i.e. wish-list, to booklist next year, save for later"); b.data("kendoWindow").open(); b.data("kendoWindow").center(); $(".k-icon.k-i-close").hide(); $("a.k-window-action.k-link").mouseover(function () { $("a.k-window-action.k-link").parent().css("background-image", "url('./Portals/0/images/close.png') !important"); return false }); $("#CancelCreateListButton").click(function () { b.data("kendoWindow").close(); $("#txtcreatelistbox").val("i.e. wish-list, to booklist next year, save for later") }); $("#CreateListButton").click(function () { if ($("#txtcreatelistbox").val() == "i.e. wish-list, to booklist next year, save for later") { $(".popurerrordiv").removeClass("dnnFormSuccess").addClass("dnnFormWarning").html("Please enter list name.   ").show(); return false } else { if ($("#txtcreatelistbox").val().trim().length == 0) { $(".popurerrordiv").removeClass("dnnFormSuccess").addClass("dnnFormWarning").html("Please enter list name.   ").show(); return false } else { var c = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Value=&Action=&ProcessType=CreateList&ListName=" + $("#txtcreatelistbox").val() + "&ProductQty=" + a + "&UserSk=" + $("#UserIDHiddenField").val())); var d = (c.substring(1, c.length - 1)); if (d == "0") { $(".popurerrordiv").removeClass("dnnFormSuccess").addClass("dnnFormWarning").text("List Name already exist").show() } else { b.data("kendoWindow").close(); $("#addedLabel").show(); $("#addtolstdiv1").hide() } return false } } }) } }; function httpGet(a) { var b = null; b = new XMLHttpRequest(); b.open("GET", a, false); b.send(null); return b.responseText } $(".ellipsis").ellipsis(); var accountname = ""; function OnUserSelect(a) { var b = this.dataItem(a.item.index()).REGISTERED_BUSINESS_NAME; var c = this.dataItem(a.item.index()).TRADING_PARTNER_ACCOUNT_SK; $("#hdnAccountSK").val(c); accountname = b.split("/")[0] } function ShowQuotePopup() { $(".k-window-actions.k-header").css("cursor", "pointer"); var a = $("#QuotePopup"); if (!a.data("kendoWindow")) { a.kendoWindow({ width: "600px", height: "380px", modal: true, draggable: false }); a.data("kendoWindow").center(); $(".popurerrordiv").removeClass("dnnFormSuccess dnnFormWarning").text("").hide(); a.data("kendoWindow").open(); a.data("kendoWindow").center(); $("#QuotePopup").parent().appendTo("form"); $(".k-icon.k-i-close").hide(); $("a.k-window-action.k-link").mouseover(function () { $("a.k-window-action.k-link").parent().css("background-image", "url('./Portals/0/images/close.png') !important"); return false }) } } var isCart = false; var isList = false; var isQuote = false; var isAddToCartEntered = false; var isokavail = false; function GetSelectedISBN() { isCart = true; isList = false; isQuote = false; var b = ""; var a = ""; var d = $(".ipadisbn").length; isAddToCartEntered = false; var f = ""; var c = ""; var e = ""; $("#Spanisbn").text(" "); $("#OutOfStockIsbn").text(" "); if (d != 0) { $.each($(".ipadisbn"), function () { var i = $(this).val().split("-"); var h = i[2]; var g = i[3]; if (h == "Y") { b = i[0] + "|" + i[1] + "-" + b; if (g != "OUT OF STOCK") { a = i[0] + "|" + i[1] + "-" + a } } if (h == "N") { f = i[0]; e = $("#ipadtit" + i[0]).val(); $("#Spanisbn").append("<li>" + f + "-" + e + "</li>") } if (g == "OUT OF STOCK") { c = i[0]; e = $("#ipadtit" + i[0]).val(); $("#OutOfStockIsbn").append("<li>" + c + "-" + e + "</li>") } }); $("#hdnselectedvalue").val(b); $("#hdnNonOutofStockSelectedValues").val(a); if (f != "") { ShowSaleRestriction() } else { if (isCart) { AddToCartItemsrestriction(b, a) } } } else { $("#MsgDiv").removeClass("dnnFormSuccess"); $("#MsgDiv").addClass("dnnFormWarning"); $("#MsgDiv").html("Please select one or more items to add to the Cart.").show(); return false } } function AddToCartItemsrestriction(a, b) { if (a != b) { Showoutofstockheadcart() } else { if (isCart) { AddToCartItems(a, false) } } }; function AddToCartItems(c, e) { c = c.substring(0, c.length - 1); var b = "CART"; var d = c; var a = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Value=" + d + "&Action=" + b)); if ($("#Cart")[0] != undefined) { if (a == 0) { $("#Cart")[0].innerText = ""; $("#Cart")[0].innerHTML = ""; $("#cartlnk").width("100px").addClass("util_rhtcartlnk"); $("#cartlnk").css("background", 'url("<%=Page.ResolveUrl("portals/0/images/cart_btn_grey.png")%>") no-repeat scroll') } else { $("#Cart")[0].innerText = "(" + a + ")"; $("#Cart")[0].innerHTML = "(" + a + ")"; $("#cartlnk").width("124px").addClass("util_rhtcartlnk"); $("#cartlnk").css("background", 'url("<%=Page.ResolveUrl("portals/0/images/mylist_grey.png")%>") no-repeat scroll') } } $.each($(".ipadisbn"), function () { var h = $(this).val().split("-"); var g = h[2]; var f = h[3]; if (f == "OUT OF STOCK" & e) { } else { if (g == "Y") { $(".added" + h[0]).show(); $(".add" + h[0]).hide(); $("#CartAdd").hide(); $("#AddedToCart").show() } } }); isAddToCartEntered = true; isCart = false; isokavail = false } var isAddToQuoteEntered = false; var callcount = 0; function selectquoteoperation(b, f) { isCart = false; isList = false; isQuote = true; callcount = 0; var d = ""; var a = ""; isAddToQuoteEntered = false; var i = $(".ipadisbn").length; var k = ""; var h = ""; var j = ""; if (i != 0) { $("#Spanisbn").text(" "); $("#OutOfStockIsbn").text(" "); $.each($(".ipadisbn"), function () { var m = $(this).val().split("-"); var l = m[2]; var n = m[5]; var c = m[3]; if (l == "Y") { d = m[0] + "-" + m[4] + "-" + m[1] + "," + d; if (c != "OUT OF STOCK") { a = m[0] + "-" + m[4] + "-" + m[1] + "," + a } } if (((l == "N") || (n == "Y"))) { k = m[0]; j = $("#ipadtit" + m[0]).val(); $("#Spanisbn").text($("#Spanisbn").text() + k + "-" + j + "\n\n") } if ((c == "OUT OF STOCK")) { h = m[0]; j = $("#ipadtit" + m[0]).val(); $("#OutOfStockIsbn").append("<li>" + h + "-" + j + "</li>") } }) } if (k != "") { var g = $("#OrderRestrictPopup"); g.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false, close: e }); g.data("kendoWindow").center(); g.data("kendoWindow").open(); g.data("kendoWindow").center(); $("#Ok").click(function () { isokavail = true; g.data("kendoWindow").close(); $("#Spanisbn").text("") }); function e() { if (isQuote && isokavail) { AddToquoteItemsrestriction(b, f, d, a, h) } } } else { AddToquoteItemsrestriction(b, f, d, a, h) } } function AddToquoteItemsrestriction(b, e, d, a, g) { if (g != "") { var f = $("#OutofstockPopup"); if (!f.data("kendoWindow")) { f.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false, close: h }); f.data("kendoWindow").center() } f.data("kendoWindow").open(); f.data("kendoWindow").center(); $("#OkStock").click(function () { $("#OutOfStockIsbn").text(""); if (isQuote) { AddToQuoteItems(b, e, d) } f.data("kendoWindow").close() }); function h() { if (isQuote && $("#OutOfStockIsbn").text() != "") { AddToQuoteItems(b, e, a) } } } else { if (isQuote) { AddToQuoteItems(b, e, d) } } } function AddToQuoteItems(a, b, d) { d = d.substring(0, d.length - 1); $("#hdnselectedvalue").val(d); $(".k-window-actions.k-header").css("cursor", "pointer"); if (a == "Create Quote") { var e = $("#QuotePopup"); $(".k-window-actions.k-header").css("cursor", "pointer"); if (!e.data("kendoWindow")) { e.kendoWindow({ width: "600px", height: "380px", modal: true, draggable: false }); e.data("kendoWindow").center() } $("#txtQuoteName").val(""); $("#hdnAccountSK").val(""); $("#txtAccountName").val(""); $("#OuterWarninCreate").hide(); $(".popurerrordiv").removeClass("dnnFormSuccess dnnFormWarning").text("").hide(); e.data("kendoWindow").open(); e.data("kendoWindow").center(); $(".k-icon.k-i-close").hide(); $("a.k-window-action.k-link").mouseover(function () { $("a.k-window-action.k-link").parent().css("background-image", "url('./Portals/0/images/close.png') !important"); return false }) } else { var f = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Action=ADDQUOTE&listquotesk=" + b.split("|")[0] + "&AccountSK=" + $("#hdnAccountSK").val() + "&value=" + d)); $("#QuoteAdded").show(); $("#AddtoQuoteDiv").hide(); return false } isAddToQuoteEntered = true; isQuote = false; isokavail = false } function GetHandler(a) { var b = null; b = new XMLHttpRequest(); b.open("GET", a, false); b.send(null); return b.responseText }; var outofstockselectedvalue = ""; var idobject; var outofStockwindow = $("#SoutofStockPopup"); if (!outofStockwindow.data("kendoWindow")) { outofStockwindow.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false, close: onclosestock }); outofStockwindow.data("kendoWindow").center() } function onclosestock() { outofstockselectedvalue = ""; idobject = undefined } function GetIndividualISBN(a, g, e, d) { var c = ""; var h = $("#selqty")[0].innerHTML; var k = ""; var j = ""; j = e; if (j == "N") { ShowAllowrestrictionpop() } else { k = d; outofstockselectedvalue = g + "|" + $(a).parents().eq(3).find("#QtyTxt").val(); idobject = a; if (k == "OUT OF STOCK") { outofStockwindow.data("kendoWindow").open(); outofStockwindow.data("kendoWindow").center() } else { var b = "CART"; var i = outofstockselectedvalue; var f = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Value=" + i + "&Action=" + b)); if ($("#Cart")[0] != undefined) { if (f == 0) { $("#Cart")[0].innerText = ""; $("#Cart")[0].innerHTML = ""; $("#cartlnk").width("100px").addClass("util_rhtcartlnk"); $("#cartlnk").css("background", 'url("<%=Page.ResolveUrl("portals/0/images/cart_btn_grey.png")%>") no-repeat scroll') } else { $("#Cart")[0].innerText = "(" + f + ")"; $("#Cart")[0].innerHTML = "(" + f + ")"; $("#cartlnk").width("124px").addClass("util_rhtcartlnk"); $("#cartlnk").css("background", 'url("<%=Page.ResolveUrl("portals/0/images/mylist_grey.png")%>")no-repeat scroll') } } $(a).hide(); $(a).prev().show(); outofstockselectedvalue = "" } } } $("#SitemcOk").click(function () { if (outofstockselectedvalue != "") { var a = "CART"; var c = outofstockselectedvalue; var b = GetHandler(GetFile("/DesktopModules/SearchModifed/Handlers/ListHandler.ashx?Value=" + c + "&Action=" + a)); if ($("#Cart")[0] != undefined) { if (b == 0) { $("#Cart")[0].innerText = ""; $("#Cart")[0].innerHTML = ""; $("#cartlnk").width("100px").addClass("util_rhtcartlnk"); $("#cartlnk").css("background", 'url("<%=Page.ResolveUrl("portals/0/images/cart_btn_grey.png") %>") no-repeat scroll') } else { $("#Cart")[0].innerText = "(" + b + ")"; $("#Cart")[0].innerHTML = "(" + b + ")"; $("#cartlnk").width("124px").addClass("util_rhtcartlnk"); $("#cartlnk").css("background", 'url("<%=Page.ResolveUrl("portals/0/images/mylist_grey.png")%>") no-repeat scroll') } } $(window).scrollTop(); if (idobject != undefined) { $(idobject).hide(); $(idobject).parents().eq(0).find("#AddedToCartpna").show() } } $("#SoutofStockPopup").data("kendoWindow").close(); outofstockselectedvalue = "" }); function Showoutofstock() { var a = $("#SoutofStockPopup"); if (!a.data("kendoWindow")) { a.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false }) } a.data("kendoWindow").open(); a.data("kendoWindow").center(); $("#SitemcOk").click(function () { a.data("kendoWindow").close() }) } function ShowAllowrestrictionpop() { var a = $("#AllowsalePopups"); if (!a.data("kendoWindow")) { a.kendoWindow({ width: "441px", height: "230px", modal: true, draggable: false }); a.data("kendoWindow").center() } a.data("kendoWindow").open(); a.data("kendoWindow").center(); $("#SitemcOks").click(function () { a.data("kendoWindow").close() }) } function Clientclick(a) { $("#hiddensearch").val($(a)[0].innerText); $("#searchClickbutton").click() };